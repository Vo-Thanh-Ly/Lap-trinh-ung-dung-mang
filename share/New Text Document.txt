### **CÃ¡ch sá»­ dá»¥ng Socket trong C#**
Socket lÃ  má»™t giao diá»‡n láº­p trÃ¬nh máº¡ng giÃºp á»©ng dá»¥ng cÃ³ thá»ƒ giao tiáº¿p vá»›i nhau thÃ´ng qua giao thá»©c TCP hoáº·c UDP.

---

## **1. CÃ¡c bÆ°á»›c sá»­ dá»¥ng Socket trong C#**
### **ğŸ”¹ Server (Láº¯ng nghe káº¿t ná»‘i)**
1. **Táº¡o socket** vá»›i Ä‘á»‹a chá»‰ IP vÃ  cá»•ng.
2. **RÃ ng buá»™c (bind) socket** vá»›i má»™t Ä‘á»‹a chá»‰ IP cá»¥ thá»ƒ.
3. **Báº¯t Ä‘áº§u láº¯ng nghe káº¿t ná»‘i** tá»« client.
4. **Cháº¥p nháº­n káº¿t ná»‘i** khi cÃ³ client yÃªu cáº§u.
5. **Gá»­i vÃ  nháº­n dá»¯ liá»‡u** qua káº¿t ná»‘i.
6. **ÄÃ³ng káº¿t ná»‘i khi xong**.

### **ğŸ”¹ Client (Gá»­i yÃªu cáº§u)**
1. **Táº¡o socket**.
2. **Káº¿t ná»‘i Ä‘áº¿n server** báº±ng Ä‘á»‹a chá»‰ IP vÃ  cá»•ng.
3. **Gá»­i dá»¯ liá»‡u Ä‘áº¿n server**.
4. **Nháº­n dá»¯ liá»‡u pháº£n há»“i tá»« server**.
5. **ÄÃ³ng káº¿t ná»‘i**.

---

## **2. VÃ­ dá»¥ Cá»¥ Thá»ƒ**
### **ğŸ“Œ Server sá»­ dá»¥ng TCP Socket**
```csharp
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading;

class Server
{
    static void Main()
    {
        // 1âƒ£ Táº¡o socket
        Socket serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

        // 2âƒ£ RÃ ng buá»™c socket vÃ o Ä‘á»‹a chá»‰ vÃ  cá»•ng
        serverSocket.Bind(new IPEndPoint(IPAddress.Any, 12345));

        // 3âƒ£ Láº¯ng nghe káº¿t ná»‘i tá»« client
        serverSocket.Listen(5);
        Console.WriteLine("ğŸ”¹ Server Ä‘ang cháº¡y...");

        while (true)
        {
            // 4âƒ£ Cháº¥p nháº­n client má»›i
            Socket clientSocket = serverSocket.Accept();
            Console.WriteLine("âœ… Client káº¿t ná»‘i!");

            // Xá»­ lÃ½ client trÃªn thread riÃªng
            Thread clientThread = new Thread(() => HandleClient(clientSocket));
            clientThread.Start();
        }
    }

    static void HandleClient(Socket clientSocket)
    {
        byte[] buffer = new byte[1024];
        int receivedBytes;
        
        try
        {
            while ((receivedBytes = clientSocket.Receive(buffer)) > 0)
            {
                string message = Encoding.UTF8.GetString(buffer, 0, receivedBytes);
                Console.WriteLine($"ğŸ“© Nháº­n: {message}");

                // Gá»­i pháº£n há»“i
                string response = $"Server nháº­n: {message}";
                clientSocket.Send(Encoding.UTF8.GetBytes(response));
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("âš ï¸ Lá»—i: " + ex.Message);
        }
        finally
        {
            clientSocket.Close();
        }
    }
}
```

---

### **ğŸ“Œ Client gá»­i dá»¯ liá»‡u Ä‘áº¿n Server**
```csharp
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;

class Client
{
    static void Main()
    {
        try
        {
            // 1âƒ£ Táº¡o socket client
            Socket clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

            // 2âƒ£ Káº¿t ná»‘i Ä‘áº¿n server
            clientSocket.Connect(new IPEndPoint(IPAddress.Parse("127.0.0.1"), 12345));
            Console.WriteLine("ğŸŸ¢ Káº¿t ná»‘i thÃ nh cÃ´ng!");

            while (true)
            {
                Console.Write("Nháº­p tin nháº¯n: ");
                string input = Console.ReadLine();
                if (input.ToUpper() == "EXIT") break;

                // 3âƒ£ Gá»­i dá»¯ liá»‡u lÃªn server
                clientSocket.Send(Encoding.UTF8.GetBytes(input));

                // 4âƒ£ Nháº­n pháº£n há»“i tá»« server
                byte[] buffer = new byte[1024];
                int receivedBytes = clientSocket.Receive(buffer);
                string response = Encoding.UTF8.GetString(buffer, 0, receivedBytes);
                Console.WriteLine("ğŸ“© Server: " + response);
            }

            clientSocket.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine("âš ï¸ Lá»—i: " + ex.Message);
        }
    }
}
```

---

## **3. CÃ¡ch cháº¡y chÆ°Æ¡ng trÃ¬nh**
1âƒ£ **Cháº¡y Server trÆ°á»›c**  
Má»Ÿ terminal/cmd, biÃªn dá»‹ch vÃ  cháº¡y server:
```
dotnet run
```
2âƒ£ **Cháº¡y Client**  
Má»Ÿ terminal/cmd khÃ¡c, biÃªn dá»‹ch vÃ  cháº¡y client:
```
dotnet run
```
3âƒ£ **Gá»­i tin nháº¯n tá»« Client** vÃ  nháº­n pháº£n há»“i tá»« Server.

---

## **4. Má»Ÿ rá»™ng**
âœ… **Xá»­ lÃ½ nhiá»u client cÃ¹ng lÃºc** â†’ DÃ¹ng **MultiThread**.  
âœ… **Gá»­i file, hÃ¬nh áº£nh** â†’ DÃ¹ng **byte array** thay vÃ¬ chuá»—i.  
âœ… **Sá»­ dá»¥ng UDP thay vÃ¬ TCP** â†’ Thay `SocketType.Stream` thÃ nh `SocketType.Dgram`.  

ğŸ“Œ **Báº¡n cÃ³ muá»‘n má»Ÿ rá»™ng theo hÆ°á»›ng nÃ o khÃ´ng?** ğŸš€

